
create-sample-data:
  parameters:
    data-dir:
      description: where to output sample test data
      default: ~/sample-test-results
      type: string
    upload:
      description: Should we upload the test results for a Test Summary?
      default: false 
      type: boolean 
  steps:
    - run: |
        mkdir -p << parameters.data-dir >>/jest
        cat \<< EOF > << parameters.data-dir >>/jest/junit.xml
        <testsuites name="jest tests">
          <testsuite name="undefined" errors="0" failures="0" skipped="0" timestamp="2018-05-16T22:26:25" time="4.21" tests="1">
            <testcase classname=" renders without crashing" name=" renders without crashing" time="2.879">
            </testcase>
          </testsuite>
        </testsuites>
        EOF
    - store_artifacts:
        path: << parameters.data-dir >>
        destination: ccidiag/sample-data
    - when:
        condition: << parameters.upload >>
        steps:
          - upload_test_results:
              path: << parameters.data-dir >>
